{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const __getComments = createAsyncThunk(\"comments/getComments\", async (payload, thunkAPI) => {\n  try {\n    const data = await axios.get(\"https://desolate-reef-97221.herokuapp.com/comments\");\n    return thunkAPI.fulfillWithValue(data.data);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error);\n  }\n});\nexport const comments = createSlice({\n  name: \"comments\",\n  initialState: {\n    comments: [],\n    isLoading: false,\n    error: null\n  },\n  reducers: {\n    createComment(state, action) {\n      state.comments.push(action.payload);\n      axios.post(\"https://desolate-reef-97221.herokuapp.com/comments\", action.payload);\n    },\n\n    removeComment(state, action) {\n      let index = state.comments.findIndex(comment => comment.id === action.payload);\n      state.comments.splice(index, 1);\n      axios.delete(`https://desolate-reef-97221.herokuapp.com/comments/${action.payload}`);\n    },\n\n    updateComment(state, action) {\n      let index = state.comments.findIndex(post => post.id === action.payload.id);\n      state.comments.splice(index, 1, action.payload);\n      axios.patch(`https://desolate-reef-97221.herokuapp.com/comments/${action.payload.id}`, action.payload);\n    }\n\n  },\n  extraReducers: {\n    [__getComments.pending]: state => {\n      state.isLoading = true; // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n    },\n    [__getComments.fulfilled]: (state, action) => {\n      state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n\n      state.comments = action.payload; // Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n    },\n    [__getComments.rejected]: (state, action) => {\n      state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n\n      state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n    }\n  }\n});\nexport let {\n  createComment,\n  removeComment,\n  updateComment\n} = comments.actions;\nexport default comments;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","__getComments","payload","thunkAPI","data","get","fulfillWithValue","error","rejectWithValue","comments","name","initialState","isLoading","reducers","createComment","state","action","push","post","removeComment","index","findIndex","comment","id","splice","delete","updateComment","patch","extraReducers","pending","fulfilled","rejected","actions"],"sources":["/Users/lenkokukyojulo/Downloads/React-homework-03-leeyuna22/src/redux/modules/comments.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nexport const __getComments = createAsyncThunk(\n    \"comments/getComments\",\n    async (payload, thunkAPI) => {\n        try {\n            const data =  await axios.get(\"https://desolate-reef-97221.herokuapp.com/comments\");\n            return thunkAPI.fulfillWithValue(data.data);\n          } catch (error) {\n            return thunkAPI.rejectWithValue(error);\n          }\n    }\n  );\nexport const comments = createSlice({\n    name:\"comments\",\n    initialState: {\n        comments: [],\n        isLoading: false,\n        error: null,\n      },\n    reducers:{\n        createComment(state, action){\n            state.comments.push(action.payload);\n            axios.post(\"https://desolate-reef-97221.herokuapp.com/comments\",action.payload );\n        },\n        removeComment(state, action){\n            let  index = state.comments.findIndex(comment =>  comment.id === action.payload);\n\t\t\t      state.comments.splice(index,1);\n            axios.delete(`https://desolate-reef-97221.herokuapp.com/comments/${action.payload}`);\n        },\n        updateComment(state, action){\n            let  index = state.comments.findIndex(post =>  post.id === action.payload.id);\n\t\t\t      state.comments.splice(index, 1, action.payload);\n            axios.patch(`https://desolate-reef-97221.herokuapp.com/comments/${action.payload.id}`, action.payload);\n        }\n    },\n    extraReducers: {\n        [__getComments.pending]: (state) => {\n          state.isLoading = true; // 네트워크 요청이 시작되면 로딩상태를 true로 변경합니다.\n        },\n        [__getComments.fulfilled]: (state, action) => {\n          state.isLoading = false; // 네트워크 요청이 끝났으니, false로 변경합니다.\n          state.comments = action.payload; // Store에 있는 todos에 서버에서 가져온 todos를 넣습니다.\n        },\n        [__getComments.rejected]: (state, action) => {\n          state.isLoading = false; // 에러가 발생했지만, 네트워크 요청이 끝났으니, false로 변경합니다.\n          state.error = action.payload; // catch 된 error 객체를 state.error에 넣습니다.\n        },\n      },\n})\n\nexport let { createComment, removeComment, updateComment} = comments.actions;\n\nexport default comments;"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,aAAa,GAAGH,gBAAgB,CACzC,sBADyC,EAEzC,OAAOI,OAAP,EAAgBC,QAAhB,KAA6B;EACzB,IAAI;IACA,MAAMC,IAAI,GAAI,MAAMJ,KAAK,CAACK,GAAN,CAAU,oDAAV,CAApB;IACA,OAAOF,QAAQ,CAACG,gBAAT,CAA0BF,IAAI,CAACA,IAA/B,CAAP;EACD,CAHH,CAGI,OAAOG,KAAP,EAAc;IACd,OAAOJ,QAAQ,CAACK,eAAT,CAAyBD,KAAzB,CAAP;EACD;AACN,CATwC,CAAtC;AAWP,OAAO,MAAME,QAAQ,GAAGV,WAAW,CAAC;EAChCW,IAAI,EAAC,UAD2B;EAEhCC,YAAY,EAAE;IACVF,QAAQ,EAAE,EADA;IAEVG,SAAS,EAAE,KAFD;IAGVL,KAAK,EAAE;EAHG,CAFkB;EAOhCM,QAAQ,EAAC;IACLC,aAAa,CAACC,KAAD,EAAQC,MAAR,EAAe;MACxBD,KAAK,CAACN,QAAN,CAAeQ,IAAf,CAAoBD,MAAM,CAACd,OAA3B;MACAF,KAAK,CAACkB,IAAN,CAAW,oDAAX,EAAgEF,MAAM,CAACd,OAAvE;IACH,CAJI;;IAKLiB,aAAa,CAACJ,KAAD,EAAQC,MAAR,EAAe;MACxB,IAAKI,KAAK,GAAGL,KAAK,CAACN,QAAN,CAAeY,SAAf,CAAyBC,OAAO,IAAKA,OAAO,CAACC,EAAR,KAAeP,MAAM,CAACd,OAA3D,CAAb;MACHa,KAAK,CAACN,QAAN,CAAee,MAAf,CAAsBJ,KAAtB,EAA4B,CAA5B;MACGpB,KAAK,CAACyB,MAAN,CAAc,sDAAqDT,MAAM,CAACd,OAAQ,EAAlF;IACH,CATI;;IAULwB,aAAa,CAACX,KAAD,EAAQC,MAAR,EAAe;MACxB,IAAKI,KAAK,GAAGL,KAAK,CAACN,QAAN,CAAeY,SAAf,CAAyBH,IAAI,IAAKA,IAAI,CAACK,EAAL,KAAYP,MAAM,CAACd,OAAP,CAAeqB,EAA7D,CAAb;MACHR,KAAK,CAACN,QAAN,CAAee,MAAf,CAAsBJ,KAAtB,EAA6B,CAA7B,EAAgCJ,MAAM,CAACd,OAAvC;MACGF,KAAK,CAAC2B,KAAN,CAAa,sDAAqDX,MAAM,CAACd,OAAP,CAAeqB,EAAG,EAApF,EAAuFP,MAAM,CAACd,OAA9F;IACH;;EAdI,CAPuB;EAuBhC0B,aAAa,EAAE;IACX,CAAC3B,aAAa,CAAC4B,OAAf,GAA0Bd,KAAD,IAAW;MAClCA,KAAK,CAACH,SAAN,GAAkB,IAAlB,CADkC,CACV;IACzB,CAHU;IAIX,CAACX,aAAa,CAAC6B,SAAf,GAA2B,CAACf,KAAD,EAAQC,MAAR,KAAmB;MAC5CD,KAAK,CAACH,SAAN,GAAkB,KAAlB,CAD4C,CACnB;;MACzBG,KAAK,CAACN,QAAN,GAAiBO,MAAM,CAACd,OAAxB,CAF4C,CAEX;IAClC,CAPU;IAQX,CAACD,aAAa,CAAC8B,QAAf,GAA0B,CAAChB,KAAD,EAAQC,MAAR,KAAmB;MAC3CD,KAAK,CAACH,SAAN,GAAkB,KAAlB,CAD2C,CAClB;;MACzBG,KAAK,CAACR,KAAN,GAAcS,MAAM,CAACd,OAArB,CAF2C,CAEb;IAC/B;EAXU;AAvBiB,CAAD,CAA5B;AAsCP,OAAO,IAAI;EAAEY,aAAF;EAAiBK,aAAjB;EAAgCO;AAAhC,IAAiDjB,QAAQ,CAACuB,OAA9D;AAEP,eAAevB,QAAf"},"metadata":{},"sourceType":"module"}